# Inst√¢ncias RCPSP para Sequenciamento de Quimioterapia

Este diret√≥rio cont√©m inst√¢ncias do problema RCPSP (Resource-Constrained Project Scheduling Problem) modelando o protocolo de quimioterapia FOLFIRI.

## üìÅ Estrutura de Arquivos

\`\`\`
instances/
‚îú‚îÄ‚îÄ folfiri_base_multirecurso.sm    # Arquivo base (1 paciente)
‚îú‚îÄ‚îÄ instances_generator.py          # Script de gera√ß√£o
‚îú‚îÄ‚îÄ instancias_geradas/             # Inst√¢ncias geradas
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_5_pacientes.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_25_pacientes.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_40_pacientes.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_50_pacientes.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_alto_A.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_alto_B.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_medio_A.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_medio_B.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_medio_C.sm
‚îÇ   ‚îú‚îÄ‚îÄ folfiri_RS_baixo_A.sm
‚îÇ   ‚îî‚îÄ‚îÄ folfiri_RS_baixo_B.sm
‚îî‚îÄ‚îÄ README.md
\`\`\`

## üìã Arquivo Base

### `folfiri_base_multirecurso.sm`

Este √© o **arquivo base** que representa um √∫nico paciente seguindo o protocolo FOLFIRI. Possui:

- **10 atividades** (incluindo source/sink)
- **4 recursos renov√°veis:**
  - **R1**: Enfermeiro
  - **R2**: Cadeira de Infus√£o
  - **R3**: M√©dico
  - **R4**: Farmac√™utico

#### Estrutura do Protocolo FOLFIRI (1 Paciente)

\`\`\`
Atividade 1 (source) ‚Üí inicia 3 atividades paralelas:
  ‚Üí Atividade 2: Prepara√ß√£o enfermeiro (2h, R1)
  ‚Üí Atividade 3: Consulta m√©dica (2h, R3)
  ‚Üí Atividade 4: Prepara√ß√£o farmac√™utica (4h, R4)
  
Atividade 5: In√≠cio da infus√£o (1h, R1+R2)
Atividade 6: Infus√£o principal (6h, R1+R2)
Atividade 7: Infus√£o prolongada (8h, R1+R2)
Atividade 8: Finaliza√ß√£o (1h, R1+R2)
Atividade 9: Libera√ß√£o (2h, R1+R2)
Atividade 10 (sink)
\`\`\`

**Disponibilidade padr√£o de recursos:** `10 10 10 10`

## üîß Processo de Gera√ß√£o

O script `instances_generator.py` cont√©m dois geradores principais:

### 1. Script 1: Varia√ß√£o de Resource Strength (RS)

**Objetivo:** Testar diferentes n√≠veis de disponibilidade de recursos mantendo um √∫nico paciente.

**M√©todo:**
- Mant√©m estrutura base (10 atividades)
- Modifica apenas a linha `RESOURCEAVAILABILITIES`
- Gera 7 cen√°rios diferentes

**Inst√¢ncias geradas:**

| Arquivo | R1 | R2 | R3 | R4 | Classifica√ß√£o |
|---------|----|----|----|----|---------------|
| `folfiri_RS_alto_A.sm` | 8 | 8 | 4 | 4 | Alto (recursos abundantes) |
| `folfiri_RS_alto_B.sm` | 10 | 10 | 5 | 5 | Alto (recursos muito abundantes) |
| `folfiri_RS_medio_A.sm` | 5 | 6 | 2 | 2 | M√©dio |
| `folfiri_RS_medio_B.sm` | 4 | 5 | 2 | 1 | M√©dio |
| `folfiri_RS_medio_C.sm` | 6 | 6 | 3 | 2 | M√©dio |
| `folfiri_RS_baixo_A.sm` | 3 | 4 | 1 | 1 | Baixo (recursos escassos) |
| `folfiri_RS_baixo_B.sm` | 3 | 3 | 2 | 1 | Baixo (recursos escassos) |

### 2. Script 2: M√∫ltiplos Pacientes

**Objetivo:** Simular chegada simult√¢nea de m√∫ltiplos pacientes ao centro de tratamento.

**M√©todo:**
1. L√™ a estrutura base (1 paciente = 8 atividades reais)
2. Replica as atividades N vezes (N = n√∫mero de pacientes)
3. Ajusta as rela√ß√µes de preced√™ncia:
   - Cada paciente mant√©m suas pr√≥prias depend√™ncias
   - Todos iniciam do mesmo source (atividade 1)
   - Todos terminam no mesmo sink (√∫ltima atividade)
4. Calcula novos IDs: `novo_id = (paciente √ó 8) + atividade_base`
5. Ajusta o horizonte: `200 √ó N` unidades de tempo

**Inst√¢ncias geradas:**

| Arquivo | Pacientes | Atividades Totais | Horizonte |
|---------|-----------|-------------------|-----------|
| `folfiri_5_pacientes.sm` | 5 | 42 | 1000 |
| `folfiri_25_pacientes.sm` | 25 | 202 | 5000 |
| `folfiri_40_pacientes.sm` | 40 | 322 | 8000 |
| `folfiri_50_pacientes.sm` | 50 | 402 | 10000 |

**F√≥rmula:** `Atividades = (8 √ó N_pacientes) + 2`

## üöÄ Como Executar

\`\`\`bash
cd instances
python instances_generator.py
\`\`\`

### Sa√≠da Esperada

\`\`\`
--- Executando Script 1: Gerando Variantes de Recursos ---
-> Gerado: instancias_geradas/folfiri_RS_alto_A.sm
-> Gerado: instancias_geradas/folfiri_RS_alto_B.sm
-> Gerado: instancias_geradas/folfiri_RS_medio_A.sm
-> Gerado: instancias_geradas/folfiri_RS_medio_B.sm
-> Gerado: instancias_geradas/folfiri_RS_medio_C.sm
-> Gerado: instancias_geradas/folfiri_RS_baixo_A.sm
-> Gerado: instancias_geradas/folfiri_RS_baixo_B.sm
--- Script 1 Conclu√≠do ---

--- Executando Script 2: Simulando 5 Pacientes ---
-> Gerado: instancias_geradas/folfiri_5_pacientes.sm com 42 atividades.
--- Script 2 Conclu√≠do ---

--- Executando Script 2: Simulando 25 Pacientes ---
-> Gerado: instancias_geradas/folfiri_25_pacientes.sm com 202 atividades.
--- Script 2 Conclu√≠do ---

--- Executando Script 2: Simulando 40 Pacientes ---
-> Gerado: instancias_geradas/folfiri_40_pacientes.sm com 322 atividades.
--- Script 2 Conclu√≠do ---

--- Executando Script 2: Simulando 50 Pacientes ---
-> Gerado: instancias_geradas/folfiri_50_pacientes.sm com 402 atividades.
--- Script 2 Conclu√≠do ---
\`\`\`

## üìù Formato do Arquivo .sm

Os arquivos seguem o formato PSPLIB (Project Scheduling Problem Library):

\`\`\`
************************************************************************
* file: [nome_do_arquivo]
* - Instance: [descri√ß√£o]
* - nr. of activities: [total com source/sink]
* - nr. of renewable resources: 4
************************************************************************
jobs (incl. supersource/sink ): [total]
horizon:                         [tempo_m√°ximo]
renewable resources:             4

PRECEDENCE RELATIONS:
- jobnr. mode successors...
  [job_id] [mode] [n_sucessores] [lista_de_sucessores]
  ...

REQUESTS/DURATIONS:
- jobnr. mode duration R1 R2 R3 R4
  [job_id] [mode] [dura√ß√£o] [req_R1] [req_R2] [req_R3] [req_R4]
  ...

RESOURCEAVAILABILITIES:
R1 R2 R3 R4
[disp_R1] [disp_R2] [disp_R3] [disp_R4]
\`\`\`

## üéØ Casos de Uso

### Testar Algoritmos com Diferentes Resource Strengths
Use as inst√¢ncias `folfiri_RS_*.sm` para avaliar como diferentes n√≠veis de recursos afetam o desempenho.

### Testar Escalabilidade
Use as inst√¢ncias de m√∫ltiplos pacientes (`5`, `25`, `40`, `50`) para avaliar escalabilidade de algoritmos.

### Benchmark Completo
Combine ambas as varia√ß√µes para criar um benchmark abrangente.

## üìä Caracter√≠sticas das Inst√¢ncias

- **Formato**: PSPLIB (.sm)
- **Tipo**: RCPSP (Resource-Constrained Project Scheduling Problem)
- **Recursos**: Todos renov√°veis (n√£o-consum√≠veis)
- **Modos**: Single-mode (cada atividade tem apenas 1 modo)
- **Rela√ß√µes de preced√™ncia**: Finish-to-Start (FS)
- **Dom√≠nio**: Sequenciamento de quimioterapia (FOLFIRI)

## ‚ö†Ô∏è Observa√ß√µes Importantes

1. **Source/Sink**: Atividades 1 e √∫ltima sempre t√™m dura√ß√£o 0 e n√£o consomem recursos
2. **Recursos**: Valores representam unidades dispon√≠veis simultaneamente
3. **Horizonte**: Estimativa superior do tempo total necess√°rio
4. **IDs cont√≠nuos**: Atividades sempre numeradas de 1 at√© N sem gaps

## üîç Recursos Modelados

| Recurso | C√≥digo | Descri√ß√£o | Uso no Protocolo |
|---------|--------|-----------|------------------|
| Enfermeiro | R1 | Profissional de enfermagem | Prepara√ß√£o, administra√ß√£o e monitoramento |
| Cadeira | R2 | Cadeira de infus√£o | Espa√ßo f√≠sico para infus√£o |
| M√©dico | R3 | M√©dico oncologista | Consulta e aprova√ß√£o do tratamento |
| Farmac√™utico | R4 | Farmac√™utico oncol√≥gico | Prepara√ß√£o dos medicamentos |

---

**Autor:** Ramon Jales  
**Projeto:** RCPSP para Sequenciamento de Quimioterapia  
**√öltima atualiza√ß√£o:** Dezembro 2025
